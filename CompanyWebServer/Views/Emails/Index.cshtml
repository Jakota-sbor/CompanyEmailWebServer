@model IEnumerable<CompanyWebServer.Models.Emails>
@{
    ViewBag.Title = "Index";
}

<h2>Главная</h2>

<p>
    @Html.ActionLink("Создать новое", "Create")
</p>
<div class="col-md-10">
    @using (Html.BeginForm("Index", "Emails", new { SearchAddressFrom = "", SearchAddressTo = "", SearchDate = DateTime.Now.ToShortTimeString() }, FormMethod.Get))
    {
        @Html.TextBox("SearchAddressFrom", null, new { @class = "form-group", @placeholder = "Отправитель" })
            @Html.TextBox("SearchAddressTo", null, new { @class = "form-group", @placeholder = "Адресат" })
            @Html.TextBox("SearchDate", String.Format("{0:d}", (string)ViewBag.CurrentDate.ToShortDateString()), new { @class = "datefield", type = "date", @placeholder = "Дата отправки (дд.мм.гггг)" })
            <input type="submit" value="Найти" class="btn btn-default" />
    }
</div>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.EmailTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EmailFrom)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EmailTo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EmailTopic)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EmailText)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.EmailTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmailFrom)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmailTo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmailTopic)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmailText)
        </td>
        <td>
            @Html.ActionLink("Редактировать", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Подробности", "Details", new { id=item.Id }) |
            @Html.ActionLink("Удалить", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table>
